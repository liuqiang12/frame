<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!--框架必需start-->
<script type="text/javascript" src="../js/jquery-1.4.js"></script>
<script type="text/javascript" src="../js/framework.js"></script>
<link href="../css/import_basic.css" rel="stylesheet" type="text/css"/>
<link  rel="stylesheet" type="text/css" id="skin"/>
<!--框架必需end-->

<!--验证脚本start-->
<script src="../js/form/validationEngine-cn.js" type="text/javascript"></script>
<script src="../js/form/validationEngine.js" type="text/javascript"></script>
<!--验证脚本end-->

<!--克隆方法start-->
<script>
	$(function(){
		$("#copyBtn").live("click",function(){
			//克隆按钮所在的tr并添加到table的末尾
			$(this).parents("tr").clone(true).appendTo($(this).parents("table"))
			//找到table最后一个tr的最后一个td中的button按钮
			var $lastBtn=$(this).parents("table").find("tr").last().find("td").last().find("input[type='button']");
			//更改按钮的显示文字
			$lastBtn.val("删除行");
			//修正按钮在复制时产生的样式错误
			$lastBtn.removeClass("button_hover");
			$lastBtn.addClass("button")
			//对该按钮重新监听点击事件
			$lastBtn.click(function(e){
				//阻止默认行为，即复制行为
				e.stopPropagation();
				//将所在的行删除
				$(this).parents("tr").remove()
			})
		})
	})
</script>
<!--克隆方法end-->
<body>
<div id="scrollContent">
	克隆时对于表单元素很多自定义属性都会失效，例如文本框的密码强度、水印、剩余字数等等。所以克隆时尽量不要为其增加多余的自定义属性。<br />
	有些渲染过的表单元素(例如单选下拉框、多选下拉框)也会有问题，该问题正在解决中。对于有问题的表单元素可以暂时先使用class="default"来对普通的表单元素克隆。

<div class="box2" panelWidth="800" panelTitle="购买车辆登记">
	<form method="post" action="chapter5-3-6-content1.html">
<table class="tableStyle"  useHover="false" useClick="false">
<tr>
	<td>车牌号</td><td><input type="text" class="validate[required]"/></td>
	<td>购买日期</td><td><input type="text" class="date validate[required]"/></td>
	<td>上传照片</td><td><input type="file"/></td>
	<td><input type="button" value="复制行" id="copyBtn"/></td>
</tr>
</table>
	<input type="submit" value=" 提 交 "/> <input type="reset" value=" 重 置 "/>
	</form>
	</div>
	代码如下：
<textarea class="code">
<table class="tableStyle" useHover="false" useClick="false">
<tr>
	<td>车牌号</td><td><input type="text" class="validate[required]"/></td>
	<td>购买日期</td><td><input type="text" class="date validate[required]"/></td>
	<td>上传照片</td><td><input type="file"/></td>
	<td><input type="button" value="复制行" id="copyBtn"/></td>
</tr>
</table>
<input type="submit" value=" 提 交 "/> <input type="reset" value=" 重 置 "/>
</textarea>
<pre></pre>	
JS脚本
<textarea class="code">
$(function(){
	$("#copyBtn").live("click",function(){
		//克隆按钮所在的tr并添加到table的末尾
		$(this).parents("tr").clone(true).appendTo($(this).parents("table"))
		//找到table最后一个tr的最后一个td中的button按钮
		var $lastBtn=$(this).parents("table").find("tr").last().find("td").last().find("input[type='button']");
		//更改按钮的显示文字
		$lastBtn.val("删除行");
		//修正按钮在复制时产生的样式错误
		$lastBtn.removeClass("button_hover");
		$lastBtn.addClass("button")
		//对该按钮重新监听点击事件
		$lastBtn.click(function(e){
			//阻止默认行为，即复制行为
			e.stopPropagation();
			//将所在的行删除
			$(this).parents("tr").remove()
		})
	})
})
</textarea>
<pre></pre>	

若要验证需要引入验证脚本
<textarea class="code">
<script src="../js/form/validationEngine-cn.js" type="text/javascript"></script>
<script src="../js/form/validationEngine.js" type="text/javascript"></script>
</textarea>
<pre></pre>	
</div>				
</body>
<!--代码高亮start-->
<script type="text/javascript" src="../js/jquery.appendDom.js"></script>
<script>
	$(function(){
			$('head').appendDom([{tagName  :'script',type : 'text/javascript',src : '../js/hl/highlight.js'}]);
			$('head').appendDom([{tagName  :'script',type : 'text/javascript',src : '../js/hl/lang-xml.js'}]);
			$('head').appendDom([{tagName  :'script',type : 'text/javascript',src : '../js/hl/lang-html.js'}]);
			$('head').appendDom([{tagName  :'link', rel : 'stylesheet',type:'text/css',src : '../js/hl/style.css'}]);
			setTimeout(showCode,1000)
	})
	function showCode(){
		$(".code").each(function(){
			var code =$(this).val()
			var hl = new DlHighlight({lang: "html",lineNumbers :false });
			var formatted = hl.doItNow(code);
			$(this).next().addClass("DlHighlight").html("<pre>" + formatted + "</pre>")
		})
	}
</script>
<!--代码高亮end-->
</html>